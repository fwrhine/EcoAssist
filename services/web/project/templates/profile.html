{% extends "base.html" %}

{% block content %}
<div class='content'>
  <div class="side-bar-menu">
    {% if session['role'] == 'teacher' or student_status == 'accepted' %}
    <a href="{{ url_for('home') }}">
      <h2>Home</h2>
    </a>
    {% endif %}
  </div>
  <div class="inner-content">
    <h2>My Profile</h2>
    <br>
    <div class="my-profile">
      <img src="{{ url_for('static', filename='images/profile.png') }}" alt="Profile">
      <div>
        <h3>{{first_name}} {{last_name}}</h3>
        <br>
        <p><b>Email:</b> {{email}}</p>
        <p><b>Role:</b> {{role}}</p>
        <p><b>School:</b> {{school}}</p>
        {% if session['role'] == 'teacher' %}
        <p><b>Classes:</b></p>
        {%for x in classes%}
        <li style="padding-left:20px;">{{x.class_name}}</li>
        {% endfor %}
        {% elif session['role'] == 'student' and student_status == 'accepted' %}
        <p>Class: {{ class_name }}</p>
        {% endif %}
      </div>
      {% if session['role'] == 'student' and student_status == 'accepted' %}
      <p>Points: {{points}}</p>
      <p>Ranking: {{ranking}} / {{total}}</p>
      {% elif session['role'] == 'student' and student_status == 'pending' %}
      <p style="color:red;">Waiting for Approval</p>
      {% elif session['role'] == 'student' and student_status == 'empty' %}
      <form class="p-4 bg-light" action='' method="post" novalidate>
        {{ form.hidden_tag() }}
        <p>
          {{ form.class_code.label }}<br>
          {{ form.class_code(size=32) }}
          {% for error in form.class_code.errors %}
          <span style="color: red;">[{{ error }}]</span>
          {% endfor %}
        </p>
        <p>{{ form.submit() }}</p>
      </form>
    {%elif session['role'] == 'teacher'%}
    <p></p>
    {% else %}
    <p>rejected</p>
    {% endif %}
  </div>
</div>
</div>
{% endblock %}
