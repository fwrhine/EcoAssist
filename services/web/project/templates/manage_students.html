{% extends "base.html" %}

{% block content %}
<div class='content'>
  <div class="side-bar-menu">
    <a href="{{ url_for('home') }}">
      <h2>Home</h2>
    </a>
    <a href="{{ url_for('class_list') }}">
      <h2>My Classes</h2>
    </a>
  </div>
  <div class="inner-content">
    <h1>My Classes</h1>
    <br>
    <table>
      <tr>
        <th>ID</th>
        <th>name</th>
        <th>Status</th>
        <th>Pending Task</th>
        <th>Manage</th>
      </tr>
      {% for student in student_list %}
      <tr>
        <td></td>
        <td>{{student.first_name}}</td>

        {% if student_list[student][0] == 'pending' %}
        <td>
          <p>{{student_list[student][0]}}</p>
          <button onclick="" class="approve_student" id={{student.id}}>Accept</button>
          <button onclick="" class="reject_student" id={{student.id}}>Reject</button>
        </td>
        {% else %}
        <td>{{student_list[student][0]}}</td>
        {% endif %}
        <td>{{student_list[student][1]}}</td>
        <td>
          {% if student_list[student][0] == 'accepted' %}
          <button class="btn-task" onclick="location.href='{{ url_for('student_task', id=student.id) }}'" type="button">Manage Student</button>
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </table>
    <br>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function(){
    $('.approve_student').click(function(){
        var id = $(this).attr("id");
        var url = `${window.location.origin}/approve-student/${id}`;

        console.log(id);
        console.log(url);
        $.ajax({
          url: url,
          // type: 'DELETE',
        }).done(function(data) {
          location.reload();
        });
           });
      });

$(document).ready(function(){
    $('.reject_student').click(function(){
        var id = $(this).attr("id");
        var url = `${window.location.origin}/reject-student/${id}`;

        console.log(id);
        console.log(url);
        $.ajax({
          url: url,
          // type: 'DELETE',
        }).done(function(data) {
          location.reload();
        });
           });
      });
</script>
{% endblock %}
